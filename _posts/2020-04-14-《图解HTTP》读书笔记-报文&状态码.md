---
layout:     post
date:       2020-04-14
author:     WWJ
header-img: img/post-bg-universe.jpg
catalog: Http
tags: JS
---

#《图解HTTP》读书笔记-报文&状态码


## 报文

----------

### 报文主体和实体主体的差异
 
 **报文**：首先，报文要么是一个请求报文，要么是一个响应报文；客户端向服务端发送请求，发送的是请求报文，服务端响应客户端的请求，则发送的是响应报文；所以，报文是HTTP通信传输中的基本单位。
 
 报文由报文头部和报文主体组成，但是报文主体可选。当发送get请求时，大部分情况下是没有报文主体的。那么在这种情况下，也就没有实体，所以，实体是报文的一部分。

**实体**：实体是通信传输中请求或响应的荷载数据，实体是由实体头部和实体主体组成。书中说到，报文主体等于实体主体，只有当传输中进行编码操作的时候，实体主体发生了改变哦，才会导致实体主体和报文主体发生差异。

举个例子：一张图片按原文传输需要5M，编码以后传输只需要2M，如果按原文传输，报文主体就是实体主体，但是编码以后实体发生了改变，这个时候实体还包括实体头部，所以在这种情况下，报文主体和实体主体之间会有差异。

### 编码提升传输速率
HTTP在传输数据的时候可以按原样传输，也可以在传输过程中通过编码来提升传输速率。不过编码的过程需要计算机来完成，所以会消耗更多的CPU资源。

**压缩传输的内容编码**
内容编码是应用在实体内容上的编码格式，内容编码之后的实体由客户端接口并负责解码。

**分割发送的分块传输编码**
在HTTP通信传输中，请求的实体资源需要等到全部返回之后才能在浏览器显示出来，通过分块传输编码，可以让浏览器逐步显示资源。

## 状态码


----------


### 2XX 成功
2XX的响应结果表明请求被正常处理了；

**200 OK**：表示从客户端发出的请求在服务端被正常处理了
在响应报文内，随状态码一起返回的信息会随着请求方法的不同而发生改变。如果是GET请求，那么请求资源会作为响应实体被返回；如果是HEAD方法，那么返回的结果只有响应首部

**204 Not Content**：表示返回信息不包含实体主体内容
该状态码表示请求被正常处理了，但在返回的信息中，是不包含实体的主体内容。也不允许返回实体的主体内容；即浏览器的内容不会更新

**206 Partial Content**：该状态码表示客户端进行了范围请求，服务端也正常处理了这部分的请求。


### 3XX 重定向
3XX的响应结果表明需要浏览器执行一些特殊的处理以正确处理请求；

**301 永久重定向**
该状态码表示请求的资源已经被重新分配了URI，浏览器需要使用现在的URI才能请求到资源。如果已经把资源对应的URI保存为书签了，这时需要按Location首部字段提示的URI重新保存

**302 临时重定向**
该状态码表示请求的资源被临时分配了一个URI，希望浏览器本次使用新的URI进行资源请求。和301状态码不同的是，302状态码代表的资源不是被永久移动的，只是临时性质的。换句话说，可能URI还会再发生改变。如果已经把资源对应的URI保存为书签了，是不需要修改书签的，而是直接使用302状态码对应的URI进行访问

**303 另外一个URI**
303状态码表示请求的资源还有另外一个URI，应使用GET方法重新获取资源。
303状态码和302状态码有着相似的功能，区别在于303状态码明确表示客户端应使用GET方法请求资源。

**304 Not Modified**
304状态码表示服务端已经接收到了请求，但是未满足返回的条件。304状态码返回时，响应报文中是没有任何实体内容的。304状态码和重定向没有任何关系

**307  临时重定向**
307状态码和302状态码有着相同的含义，虽然302状态码也禁止将POST改为GET，但实际在使用的过程中大家都不遵守，而307状态码则会严格遵守浏览器标准

### 4XX 客户端错误

**400 语法错误**：表示请求报文中有语法错误，需要修改
**401 需要认证**：表示发送的请求有需要HTTP认证的
**403 服务端拒绝**： 表示访问权限出了问题
**404 服务器资源不存在 **： 表示在服务器上找不到该资源

### 5XX 服务端错误
5XX的状态码表示服务端本身发生了错误

**500 Internal Server Error**：表示服务端在执行请求的时候发生了错误
**503 Server Unavailable**：服务端暂时
